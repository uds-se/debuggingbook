
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Illustrated Code &#8212; The Debugging Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=d5c2cecb" />
    <link rel="stylesheet" type="text/css" href="_static/mastodon-timeline.css?v=f82c2b23" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'IllustratedCode';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content"><p>This is a beta version of debuggingbook.org, currently in development. See the <a href="https://debuggingbook.org/classic/"  style="color:white!important;">classic site</a> for the 2024 version.</p></div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/debuggingbook.png" class="logo__image only-light" alt="The Debugging Book - Home"/>
    <script>document.write(`<img src="_static/debuggingbook.png" class="logo__image only-dark" alt="The Debugging Book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    The Debugging Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Tours.html">Sitemap</a></li>
<li class="toctree-l1"><a class="reference internal" href="Intro_Debugging.html">Introduction to Debugging</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Observing Executions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Tracer.html">Tracing Executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Debugger.html">How Debuggers Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assertions.html">Asserting Expectations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Flows and Dependencies</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Slicer.html">Tracking Failure Origins</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reducing Failure Causes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="DeltaDebugger.html">Reducing Failure-Inducing Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeDebugger.html">Isolating Failure-Inducing Changes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Abstracting Failures</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="StatisticalDebugger.html">Statistical Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicInvariants.html">Mining Function Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="DDSetDebugger.html">Generalizing Failure Circumstances</a></li>
<li class="toctree-l1"><a class="reference internal" href="Alhazen.html">Learning from Failures</a></li>
<li class="toctree-l1"><a class="reference internal" href="PerformanceDebugger.html">Debugging Performance Issues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Automatic Repair</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Repairer.html">Repairing Code Automatically</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Debugging in the Large</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Tracking.html">Tracking Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeCounter.html">Where the Bugs are</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ExpectError.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Timer.html">Timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Timeout.html">Timeout</a></li>
<li class="toctree-l1"><a class="reference internal" href="ClassDiagram.html">Class Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="StackInspector.html">Inspecting Call Stacks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About This Book</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ReleaseNotes.html">Release Notes for The Debugging Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="Importing.html">Downloads and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Guide_for_Authors.html">Guide for Authors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/uds-se/debuggingbook/master?urlpath=tree/docs/notebooks/IllustratedCode.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/uds-se/debuggingbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/uds-se/debuggingbook/issues/new?title=Issue%20on%20page%20%2FIllustratedCode.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
    <li><a href="../code/IllustratedCode.py" target="_blank"
       class="btn btn-sm btn-download-source-button dropdown-item"
       title="Download Python code"
       data-bs-placement="left" data-bs-toggle="tooltip"
    >
  

    <span class="btn__icon-container">
      <i class="fas fa-file"></i>
      </span>
    <span class="btn__text-container">.py</span>
    </a>
    </li>
    
      
      
      
      <li><a href="_sources/IllustratedCode.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download notebook"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  
    <li><a href="Importing.html" target="_blank"
       class="btn btn-sm btn-download-source-button dropdown-item"
       title="All downloads"
       data-bs-placement="left" data-bs-toggle="tooltip"
    >
  

    <span class="btn__icon-container">
      <i class="fas fa-file"></i>
      </span>
    <span class="btn__text-container">All downloads</span>
    </a>
    </li>
    </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Illustrated Code</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Illustrated Code</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-software-in-a-literate-way">Building Software in a Literate Way</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#talk-abstract">Talk Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-support-code">Some Support Code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sequence-diagrams-with-mermaid">Sequence Diagrams with Mermaid</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#class-diagrams-with-mermaid">Class Diagrams with Mermaid</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#illustrated-code-building-software-in-a-literate-way">Illustrated Code: Building Software in a Literate Way</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jupyter-demo-factorials">Jupyter Demo: Factorials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#can-programming-be-liberated-from-the-typewriter-style">Can Programming be Liberated from the Typewriter Style?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interface">Interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specification">Specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rationale">Rationale</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tests">Tests</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-tests">Regular Tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#check-against-spec">Check against Spec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#symbolic-verification">Symbolic Verification</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial">Tutorial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#q-a">Q&amp;A</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#whats-wrong-with-middle">What’s wrong with <code class="docutils literal notranslate"><span class="pre">middle()</span></code>?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-get-a-syntax-error">I get a syntax error</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-we-have-a-largest-and-smallest-function-too">Can we have a <code class="docutils literal notranslate"><span class="pre">largest()</span></code> and <code class="docutils literal notranslate"><span class="pre">smallest()</span></code> function too?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-drawing-uml">More Drawing UML</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-resources">More Resources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-illustrate-stands-for">What “Illustrate” stands for</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-is-for-illustrate"><code class="docutils literal notranslate"><span class="pre">I</span></code> is for <code class="docutils literal notranslate"><span class="pre">I</span></code>llustrate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#l-is-for-lavish"><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>avish</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#l-is-for-log"><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>og</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#u-is-for-update"><code class="docutils literal notranslate"><span class="pre">U</span></code> is for <code class="docutils literal notranslate"><span class="pre">U</span></code>pdate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#s-is-for-spiralize"><code class="docutils literal notranslate"><span class="pre">S</span></code> is for <code class="docutils literal notranslate"><span class="pre">S</span></code>piralize</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t-is-for-tutorial"><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>utorial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r-is-for-reference"><code class="docutils literal notranslate"><span class="pre">R</span></code> is for <code class="docutils literal notranslate"><span class="pre">R</span></code>eference</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-is-for-assist"><code class="docutils literal notranslate"><span class="pre">A</span></code> is for <code class="docutils literal notranslate"><span class="pre">A</span></code>ssist</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t-is-for-test"><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>est</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#e-is-for-ease"><code class="docutils literal notranslate"><span class="pre">E</span></code> is for <code class="docutils literal notranslate"><span class="pre">E</span></code>ase</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="illustrated-code">
<h1>Illustrated Code<a class="headerlink" href="#illustrated-code" title="Link to this heading">#</a></h1>
<section id="building-software-in-a-literate-way">
<h2>Building Software in a Literate Way<a class="headerlink" href="#building-software-in-a-literate-way" title="Link to this heading">#</a></h2>
<p>This notebook contains the code examples for Andreas Zeller’s keynotes:</p>
<ul class="simple">
<li><p>“Illustrated Code: Building Software in a Literate Way” at ASE 2021; and</p></li>
<li><p>“Illustrated Code; What Software Engineering can Learn from Research Software” at SE 2022.</p></li>
</ul>
<p>Go and</p>
<ul class="simple">
<li><p>Read the <a class="reference external" href="https://www.slideshare.net/andreas.zeller/illustrated-code-ase-2021">talk slides</a></p></li>
<li><p><a class="reference external" href="https://mybinder.org/v2/gh/uds-se/debuggingbook/HEAD?labpath=docs/notebooks/IllustratedCode.ipynb">Interact</a> with the notebook</p></li>
</ul>
</section>
<section id="talk-abstract">
<h2>Talk Abstract<a class="headerlink" href="#talk-abstract" title="Link to this heading">#</a></h2>
<p>Notebooks – rich, interactive documents that join together code, documentation, and outputs – are all the rage with data scientists. But can they be used for actual software development? In this talk, I share experiences from authoring two interactive textbooks – <a class="reference external" href="http://fuzzingbook.org">fuzzingbook.org</a> and <a class="reference external" href="http://debuggingbook.org">debuggingbook.org</a> – and show how notebooks not only serve for exploring and explaining code and data, but also how they can be used as software modules, integrating self-checking documentation, tests, and tutorials all in one place. The resulting software focuses on the essential, is well-documented, highly maintainable, easily extensible, and has a much higher shelf life than the “duct tape and wire” prototypes frequently found in research and beyond.</p>
<i>
    <a href="https://andreas-zeller.info">Andreas Zeller</a> is faculty at the 
    <a href="https://www.cispa.de" target=_blank>CISPA Helmholtz Center for Information Security</a> and professor for Software Engineering at 
    <a href="https://saarland-informatics-campus.de/en/" target=_blank>Saarland University</a>, both in Saarbrücken, Germany.  
    His <a href="https://scholar.google.com/citations?user=-Qytr_YAAAAJ&hl=en&oi=ao" target=_blank>research</a> 
    on automated debugging, mining software archives, specification mining, and security testing has proven <a href="/assets/ZellerCV.pdf">highly influential</a>.  
    Zeller is an <a href="https://awards.acm.org/fellows" target=_blank>ACM Fellow</a> and holds an <a href="https://www.sigsoft.org/awards/outstandingResearchAward.html" target=_blank>ACM SIGSOFT Outstanding Research Award</a>.
    </i></section>
<section id="some-support-code">
<h2>Some Support Code<a class="headerlink" href="#some-support-code" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bookutils.setup</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">Tracer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tracer</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">types</span><span class="w"> </span><span class="kn">import</span> <span class="n">FrameType</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">inspect</span><span class="w"> </span><span class="kn">import</span> <span class="n">signature</span><span class="p">,</span> <span class="n">getmembers</span>
</pre></div>
</div>
</div>
</div>
<section id="sequence-diagrams-with-mermaid">
<h3>Sequence Diagrams with Mermaid<a class="headerlink" href="#sequence-diagrams-with-mermaid" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SequenceDiagramTracer</span><span class="p">(</span><span class="n">Tracer</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="s1">&#39;Client&#39;</span><span class="p">,</span> <span class="n">server</span><span class="o">=</span><span class="s1">&#39;Server&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">server</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">traceit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">:</span> <span class="n">FrameType</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arg</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">&#39;call&#39;</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span>
            <span class="n">args_line</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">([</span><span class="n">var</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">var</span><span class="p">])</span> 
                                            <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]))</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="si">}</span><span class="s1">-&gt;&gt;+</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">args_line</span><span class="si">}</span><span class="s1">)&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s1">&#39;return&#39;</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="si">}</span><span class="s1">--&gt;&gt;-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;: </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;```mermaid&#39;</span><span class="p">]</span> <span class="o">+</span>
                         <span class="p">[</span><span class="s1">&#39;sequenceDiagram&#39;</span><span class="p">]</span> <span class="o">+</span> 
                         <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">+</span> 
                         <span class="p">[</span><span class="s1">&#39;```&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="class-diagrams-with-mermaid">
<h3>Class Diagrams with Mermaid<a class="headerlink" href="#class-diagrams-with-mermaid" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ClassDiagram</span><span class="p">():</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls</span> <span class="o">=</span> <span class="bp">cls</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">methods_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">members</span> <span class="o">=</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">fun</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">fun</span><span class="p">)</span> <span class="ow">in</span> <span class="n">getmembers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>
                   <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;  -</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">member</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
                                <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span> <span class="ow">in</span> <span class="n">members</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
                                <span class="p">])</span>

        <span class="n">methods</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;  +</span><span class="si">{</span><span class="n">name</span><span class="si">}{</span><span class="nb">str</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="n">member</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; -&gt; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
                             <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span> <span class="ow">in</span> <span class="n">members</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
                             <span class="p">])</span>
        <span class="k">return</span> <span class="n">attributes</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">```mermaid</span>
<span class="s2">classDiagram</span>
<span class="s2">direction TD</span>
<span class="s2">class Server </span><span class="se">{{</span>
<span class="s2">  </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">methods_str</span><span class="p">()</span><span class="si">}</span>
<span class="se">}}</span>
<span class="s2">```&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="illustrated-code-building-software-in-a-literate-way">
<h1>Illustrated Code: Building Software in a Literate Way<a class="headerlink" href="#illustrated-code-building-software-in-a-literate-way" title="Link to this heading">#</a></h1>
<section id="jupyter-demo-factorials">
<h2>Jupyter Demo: Factorials<a class="headerlink" href="#jupyter-demo-factorials" title="Link to this heading">#</a></h2>
<p>We do a bit of Jupyter demo. Double-click on a cell to edit it. Press <code class="docutils literal notranslate"><span class="pre">Shift</span></code>+<code class="docutils literal notranslate"><span class="pre">Return</span></code> to execute/render it.</p>
<p><code class="docutils literal notranslate"><span class="pre">factorial(n)</span></code> computes the factorial of n, that is <span class="math notranslate nohighlight">\(n! = \prod_{i=1}^n i = 1 \times 2 \times \dots \times n\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="can-programming-be-liberated-from-the-typewriter-style">
<h2>Can Programming be Liberated from the Typewriter Style?<a class="headerlink" href="#can-programming-be-liberated-from-the-typewriter-style" title="Link to this heading">#</a></h2>
<p>We define a function <code class="docutils literal notranslate"><span class="pre">middle(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> that returns the “middle” of three integers <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, and <span class="math notranslate nohighlight">\(z\)</span> – i.e. the one that is neither the maximum nor the minimum of the three.</p>
<p>We show how to use notebooks to</p>
<ul class="simple">
<li><p>document its interface</p></li>
<li><p>provide a specification</p></li>
<li><p>provide rationales and experiments</p></li>
<li><p>include tests</p></li>
<li><p>include architecture</p></li>
</ul>
</section>
<section id="interface">
<h2>Interface<a class="headerlink" href="#interface" title="Link to this heading">#</a></h2>
<p>Let us define an interface for <code class="docutils literal notranslate"><span class="pre">middle()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">middle_i</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the middle of three numbers x, y, z&quot;&quot;&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Standard way of documenting things</p></li>
<li><p>No formal spec (what is “the middle” here?); no context; no rationale</p></li>
<li><p>No usage example</p></li>
<li><p>No implementation (yet)</p></li>
</ul>
</section>
<section id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Link to this heading">#</a></h2>
<p>Here’s an (executable) specification of <code class="docutils literal notranslate"><span class="pre">middle()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">middle_spec</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>This specification is executable, so we can easily include examples:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">middle_spec</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>Or just write the examples as assertions, so we can use them as tests later:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">middle_spec</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
</div>
<p>Of course, your specification can also include all sorts of diagrams. (Install <a class="reference external" href="https://opensourcelibs.com/lib/jupyterlab-markup">jupyterlab-markup</a> for this.)</p>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
    Client-&gt;&gt;+Server: middle(5, 4, 7)
    Server--&gt;&gt;-Client: 5
</pre></div>
</div>
<p>For the record, this diagram is created with five lines of Markdown:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```mermaid
sequenceDiagram
Client-&gt;&gt;+Server: middle(5, 4, 7)
Server--&gt;&gt;-Client: 5
```
</pre></div>
</div>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">#</a></h2>
<p>Let us now provide an efficient implementation for <code class="docutils literal notranslate"><span class="pre">middle()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">middle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the middle of three numbers x, y, z&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">y</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">y</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">z</span>
</pre></div>
</div>
</div>
</div>
<p>Once written, this is executable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">middle</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Tests and results become part of the doc!</p>
</section>
<section id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Link to this heading">#</a></h2>
<p>Why do we implement <code class="docutils literal notranslate"><span class="pre">middle()</span></code> as above, rather than using the much shorter <code class="docutils literal notranslate"><span class="pre">middle_spec()</span></code> code? Because it is about <em>twice as fast</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">middle_benchmark</span><span class="p">(</span><span class="n">middle_fun</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span>
                     <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return elapsed time for calling `middle_fun` `n` times&quot;&quot;&quot;</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">middle_fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
        <span class="n">elapsed</span> <span class="o">+=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">elapsed</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">middle_elapsed</span> <span class="o">=</span> <span class="n">middle_benchmark</span><span class="p">(</span><span class="n">middle</span><span class="p">)</span>
<span class="n">middle_elapsed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.13567250536289066
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">middle_spec_elapsed</span> <span class="o">=</span> <span class="n">middle_benchmark</span><span class="p">(</span><span class="n">middle_spec</span><span class="p">)</span>
<span class="n">middle_spec_elapsed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.2788784730655607
</pre></div>
</div>
</div>
</div>
<p>The document can include all these experiments and their results as a rationale, as above</p>
<p>The document can also discuss and evaluate more alternatives, 
reproducing the thoughts and experiments of the original programmer</p>
<p>We can have the document check automatically whether the rationale holds:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">middle_elapsed</span> <span class="o">&lt;</span> <span class="n">middle_spec_elapsed</span><span class="p">,</span> <span class="s2">&quot;Inconsistent doc&quot;</span>
<span class="k">assert</span> <span class="n">middle_elapsed</span> <span class="o">*</span> <span class="mf">1.2</span> <span class="o">&lt;</span> <span class="n">middle_spec_elapsed</span><span class="p">,</span> <span class="s2">&quot;Inconsistent doc&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>This ensures consistency between text and code.</p>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Link to this heading">#</a></h2>
<p>Tests can be written as additional examples on how the code should work:</p>
<section id="regular-tests">
<h3>Regular Tests<a class="headerlink" href="#regular-tests" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<p>If a test fails, that’s the same as an example failing. (And examples act as tests.)</p>
<p>One can analyze (and report) test performance, again in the document – for instance, measure the coverage of our code (<code class="docutils literal notranslate"><span class="pre">*</span></code> = line is covered during testing)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">StatisticalDebugger</span><span class="w"> </span><span class="kn">import</span> <span class="n">CoverageCollector</span><span class="p">,</span> <span class="n">code_with_coverage</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">CoverageCollector</span><span class="p">()</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">code_with_coverage</span><span class="p">(</span><span class="n">middle</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">coverage</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   1 * <span class=" -Color -Color-Blue">def</span><span class=" -Color -Color-White"> </span><span class=" -Color -Color-Green">middle</span>(x: <span class=" -Color -Color-Cyan">int</span>, y: <span class=" -Color -Color-Cyan">int</span>, z: <span class=" -Color -Color-Cyan">int</span>) -&gt; <span class=" -Color -Color-Cyan">int</span>:
   2   <span class=" -Color -Color-White">    </span><span class=" -Color -Color-Yellow">&quot;&quot;&quot;Return the middle of three numbers x, y, z&quot;&quot;&quot;</span>
   3 *     <span class=" -Color -Color-Blue">if</span> y &lt; z:
   4 *         <span class=" -Color -Color-Blue">if</span> x &lt; y:
   5 *             <span class=" -Color -Color-Blue">return</span> y
   6 *         <span class=" -Color -Color-Blue">elif</span> x &lt; z:
   7               <span class=" -Color -Color-Blue">return</span> x
   8       <span class=" -Color -Color-Blue">else</span>:
   9 *         <span class=" -Color -Color-Blue">if</span> x &gt; y:
  10               <span class=" -Color -Color-Blue">return</span> y
  11 *         <span class=" -Color -Color-Blue">elif</span> x &gt; z:
  12 *             <span class=" -Color -Color-Blue">return</span> x
  13 *     <span class=" -Color -Color-Blue">return</span> z
</pre></div>
</div>
</div>
</div>
<p>It seems we need to add more tests to cover all lines:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<p>And we achieve 100% coverage:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">code_with_coverage</span><span class="p">(</span><span class="n">middle</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">coverage</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   1 * <span class=" -Color -Color-Blue">def</span><span class=" -Color -Color-White"> </span><span class=" -Color -Color-Green">middle</span>(x: <span class=" -Color -Color-Cyan">int</span>, y: <span class=" -Color -Color-Cyan">int</span>, z: <span class=" -Color -Color-Cyan">int</span>) -&gt; <span class=" -Color -Color-Cyan">int</span>:
   2   <span class=" -Color -Color-White">    </span><span class=" -Color -Color-Yellow">&quot;&quot;&quot;Return the middle of three numbers x, y, z&quot;&quot;&quot;</span>
   3 *     <span class=" -Color -Color-Blue">if</span> y &lt; z:
   4 *         <span class=" -Color -Color-Blue">if</span> x &lt; y:
   5 *             <span class=" -Color -Color-Blue">return</span> y
   6 *         <span class=" -Color -Color-Blue">elif</span> x &lt; z:
   7 *             <span class=" -Color -Color-Blue">return</span> x
   8       <span class=" -Color -Color-Blue">else</span>:
   9 *         <span class=" -Color -Color-Blue">if</span> x &gt; y:
  10 *             <span class=" -Color -Color-Blue">return</span> y
  11 *         <span class=" -Color -Color-Blue">elif</span> x &gt; z:
  12 *             <span class=" -Color -Color-Blue">return</span> x
  13 *     <span class=" -Color -Color-Blue">return</span> z
</pre></div>
</div>
</div>
</div>
<p>Assumptions about coverage can be made in the document, too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">coverage</span><span class="p">())</span> <span class="o">&gt;=</span> <span class="mi">11</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="check-against-spec">
<h3>Check against Spec<a class="headerlink" href="#check-against-spec" title="Link to this heading">#</a></h3>
<p>One can check against the spec, again in the document. Here we compare <code class="docutils literal notranslate"><span class="pre">middle()</span></code> against <code class="docutils literal notranslate"><span class="pre">middle_spec()</span></code> with 100,000 random numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">middle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="o">==</span> <span class="n">middle_spec</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>All these tests can be run (and debugged) right from the document.</p>
</section>
<section id="symbolic-verification">
<h3>Symbolic Verification<a class="headerlink" href="#symbolic-verification" title="Link to this heading">#</a></h3>
<p>One can also include static checks or symbolic verification. Here, we encode the path constraints from the <code class="docutils literal notranslate"><span class="pre">middle()</span></code> code for the Z3 constraint solver:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">z3</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/zeller/.virtualenvs/python3.13/lib/python3.13/site-packages/z3/z3core.py:5: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools&lt;81.
  import pkg_resources
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Solver</span><span class="p">()</span>  <span class="c1"># Create a Z3 solver with four variables</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;middle&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">y</span><span class="p">))</span>  <span class="c1"># Encode the middle() constraints</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">x</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">y</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">x</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">)),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">z</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>We can actually prove correctness this way: Is it possible that <code class="docutils literal notranslate"><span class="pre">middle()</span></code> returns a wrong result? (no.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span> <span class="o">!=</span> <span class="n">y</span><span class="p">))</span>  <span class="c1"># This shouldn&#39;t be possible</span>
<span class="n">s</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><b>unsat</b></div></div>
</div>
</section>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">#</a></h2>
<p>We can extract architecture diagrams such as a class diagram from code, always kept up to date:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Server</span><span class="p">():</span>
    <span class="n">state</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">middle</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">middle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ClassDiagram</span><span class="p">(</span><span class="n">Server</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>classDiagram
direction TD
class Server {
    -state = 42
  +max(x: int, y: int, z: int) int
  +middle(x: int, y: int, z: int) int
  +min(x: int, y: int, z: int) int
}
</pre></div>
</div>
</div>
</div>
<p>We can extract dynamic diagrams from executions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">SequenceDiagramTracer</span><span class="p">()</span> <span class="k">as</span> <span class="n">tracer</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">middle</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">tracer</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>sequenceDiagram
Client-&gt;&gt;+Server: middle(z=20, y=50, x=30)
Server--&gt;&gt;-Client: 30
Client-&gt;&gt;+Server: __del__(self=middle)
Client-&gt;&gt;+Server: ref(self=&lt;z3.z3.Context object at 0x116463a10&gt;)
Server--&gt;&gt;-Client: &lt;ContextObj object at 0x11665be50&gt;
Client-&gt;&gt;+Server: ref(self=&lt;z3.z3.Context object at 0x116463a10&gt;)
Server--&gt;&gt;-Client: &lt;ContextObj object at 0x11665be50&gt;
Client-&gt;&gt;+Server: as_ast(self=middle)
Server--&gt;&gt;-Client: &lt;Ast object at 0x1167001d0&gt;
Client-&gt;&gt;+Server: Z3_dec_ref(_elems=&lt;z3.z3core.Elementaries object at 0x116518c00&gt;, a1=&lt;Ast object at 0x1167001d0&gt;, a0=&lt;ContextObj object at 0x11665be50&gt;)
Client-&gt;&gt;+Server: from_param(obj=&lt;ContextObj object at 0x11665be50&gt;)
Server--&gt;&gt;-Client: &lt;ContextObj object at 0x11665be50&gt;
Client-&gt;&gt;+Server: from_param(obj=&lt;Ast object at 0x1167001d0&gt;)
Server--&gt;&gt;-Client: &lt;Ast object at 0x1167001d0&gt;
Server--&gt;&gt;-Client
Server--&gt;&gt;-Client
</pre></div>
</div>
</div>
</div>
<p>One may even compare this diagram with the one in the specification and flag mismatches.</p>
</section>
<section id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading">#</a></h2>
<p>The document can contain instructions on how to run things. (Of course, these would be executable too, testing the tutorial.)</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">middle</span></code>, you need Python 3.9 or later. First install the <code class="docutils literal notranslate"><span class="pre">debuggingbook</span></code> module, available via the Python <code class="docutils literal notranslate"><span class="pre">pip</span></code> program:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>--quiet<span class="w"> </span>debuggingbook
</pre></div>
</div>
</div>
</div>
<p>Within <code class="docutils literal notranslate"><span class="pre">debuggingbook</span></code>, the <code class="docutils literal notranslate"><span class="pre">StatisticalDebugger</span></code> provides a <code class="docutils literal notranslate"><span class="pre">middle()</span></code> function, but it is buggy (as it serves to demonstrate statistical debugging). A correct version is available as <code class="docutils literal notranslate"><span class="pre">middle_fixed()</span></code>, which you can import as <code class="docutils literal notranslate"><span class="pre">middle()</span></code> as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">debuggingbook.StatisticalDebugger</span><span class="w"> </span><span class="kn">import</span> <span class="n">middle_fixed</span> <span class="k">as</span> <span class="n">middle</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">middle</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">z3</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Solver</span><span class="p">()</span>  <span class="c1"># Create a Z3 solver with four variables</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="s1">&#39;middle&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">y</span><span class="p">))</span>  <span class="c1"># Encode the middle() constraints</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">x</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">y</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">x</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Implies</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">),</span> <span class="n">Not</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">z</span><span class="p">)),</span> <span class="n">m</span> <span class="o">==</span> <span class="n">z</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>We can actually prove correctness this way: Is it possible that <code class="docutils literal notranslate"><span class="pre">middle()</span></code> returns a wrong result? (no.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">And</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">,</span> <span class="n">m</span> <span class="o">!=</span> <span class="n">y</span><span class="p">))</span>  <span class="c1"># This shouldn&#39;t be possible</span>
<span class="n">s</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><b>unsat</b></div></div>
</div>
</section>
<section id="q-a">
<h2>Q&amp;A<a class="headerlink" href="#q-a" title="Link to this heading">#</a></h2>
<p>The document can contain sections with questions and answers. These would be managed by the public, and continuously ensure consistency.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#What_s_wrong_with_middle()?"><span class="xref myst">What’s wrong with middle()?</span></a></p></li>
<li><p><a class="reference internal" href="#I_get_a_syntax_error"><span class="xref myst">I get a syntax error</span></a></p></li>
<li><p><a class="reference internal" href="#Can_we_have_a_largest()_and_smallest()_function_too?"><span class="xref myst">Can we have a <code class="docutils literal notranslate"><span class="pre">largest()</span></code> and <code class="docutils literal notranslate"><span class="pre">smallest()</span></code> function too?</span></a></p></li>
</ul>
<section id="whats-wrong-with-middle">
<h3>What’s wrong with <code class="docutils literal notranslate"><span class="pre">middle()</span></code>?<a class="headerlink" href="#whats-wrong-with-middle" title="Link to this heading">#</a></h3>
<p><strong>Question.</strong> I use <code class="docutils literal notranslate"><span class="pre">middle</span></code> from the <code class="docutils literal notranslate"><span class="pre">StatisticalDebugger</span></code> module. However, it doesn’t seem to return the correct value. What am I doing wrong? – <a class="reference external" href="mailto:novice&#37;&#52;&#48;python&#46;net">novice<span>&#64;</span>python<span>&#46;</span>net</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">StatisticalDebugger</span><span class="w"> </span><span class="kn">import</span> <span class="n">middle</span>
<span class="n">middle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># should be 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p><strong>Best Answer (+10).</strong> You need to import <code class="docutils literal notranslate"><span class="pre">middle_fixed</span></code> instead. – <a class="reference external" href="mailto:expert&#37;&#52;&#48;debugging&#46;com">expert<span>&#64;</span>debugging<span>&#46;</span>com</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">StatisticalDebugger</span><span class="w"> </span><span class="kn">import</span> <span class="n">middle_fixed</span> <span class="k">as</span> <span class="n">middle</span>
<span class="n">middle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># should be 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p><strong>Answer (+5)</strong> Don’t use <code class="docutils literal notranslate"><span class="pre">middle(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> – just write <code class="docutils literal notranslate"><span class="pre">sorted([x,</span> <span class="pre">y,</span> <span class="pre">z])[1]</span></code> – <a class="reference external" href="mailto:say&#46;no&#46;to&#37;&#52;&#48;libraries&#46;com">say<span>&#46;</span>no<span>&#46;</span>to<span>&#64;</span>libraries<span>&#46;</span>com</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">sorted</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p><strong>Comment (-2)</strong> Actually, <code class="docutils literal notranslate"><span class="pre">sort()</span></code> is more efficient. – <a class="reference external" href="mailto:cpluspluslover&#37;&#52;&#48;programming&#46;com">cpluspluslover<span>&#64;</span>programming<span>&#46;</span>com</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xyz</span> <span class="o">=</span> <span class="nb">list</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span> <span class="n">xyz</span><span class="o">.</span><span class="n">sort</span><span class="p">();</span> <span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p><strong>Comment (+2)</strong> <code class="docutils literal notranslate"><span class="pre">sort()</span></code> takes three lines of code, whereas <code class="docutils literal notranslate"><span class="pre">sorted()</span></code> takes one. Also, avoid multiple statements on a line – <a class="reference external" href="mailto:haskellfan&#37;&#52;&#48;beautifulcode&#46;org">haskellfan<span>&#64;</span>beautifulcode<span>&#46;</span>org</a></p>
</section>
<section id="i-get-a-syntax-error">
<h3>I get a syntax error<a class="headerlink" href="#i-get-a-syntax-error" title="Link to this heading">#</a></h3>
<p><strong>Question.</strong> When I run the above <code class="docutils literal notranslate"><span class="pre">middle()</span></code> code, I get a message
<code class="docutils literal notranslate"><span class="pre">SyntaxError:</span> <span class="pre">invalid</span> <span class="pre">syntax</span></code>. What am I doing wrong? – <a class="reference external" href="mailto:appleuser&#37;&#52;&#48;mac&#46;com">appleuser<span>&#64;</span>mac<span>&#46;</span>com</a></p>
<p><strong>Best Answer (+10).</strong> Are you using Python 2.x? Type annotations work with Python 3.6 and later – <a class="reference external" href="mailto:updates&#37;&#52;&#48;python&#46;org">updates<span>&#64;</span>python<span>&#46;</span>org</a></p>
</section>
<section id="can-we-have-a-largest-and-smallest-function-too">
<h3>Can we have a <code class="docutils literal notranslate"><span class="pre">largest()</span></code> and <code class="docutils literal notranslate"><span class="pre">smallest()</span></code> function too?<a class="headerlink" href="#can-we-have-a-largest-and-smallest-function-too" title="Link to this heading">#</a></h3>
<p><strong>Question.</strong> How do I get the greatest (or smallest) of <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, and <span class="math notranslate nohighlight">\(z\)</span>?  – <a class="reference external" href="mailto:novice&#37;&#52;&#48;python&#46;net">novice<span>&#64;</span>python<span>&#46;</span>net</a></p>
<p><strong>Best Answer (+10).</strong> Try Python <code class="docutils literal notranslate"><span class="pre">max()</span></code> and <code class="docutils literal notranslate"><span class="pre">min()</span></code> – <a class="reference external" href="mailto:guido&#37;&#52;&#48;python&#46;org">guido<span>&#64;</span>python<span>&#46;</span>org</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">max</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># should be 3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">min</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># should be 1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="more-drawing-uml">
<h2>More Drawing UML<a class="headerlink" href="#more-drawing-uml" title="Link to this heading">#</a></h2>
<p>Install <a class="reference external" href="https://opensourcelibs.com/lib/jupyterlab-markup">jupyterlab-markup</a></p>
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TD;
    A--&gt;B;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Markdown</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">```mermaid</span>
<span class="s2">graph TD;</span>
<span class="s2">    A--&gt;B;</span>
<span class="s2">    B--&gt;A;</span>
<span class="s2">    A--&gt;C;</span>
<span class="s2">    B--&gt;D;</span>
<span class="s2">    C--&gt;D;</span>
<span class="s2">```&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="highlight-mermaid notranslate"><div class="highlight"><pre><span></span>graph TD;
    A--&gt;B;
    B--&gt;A;
    A--&gt;C;
    B--&gt;D;
    C--&gt;D;
</pre></div>
</div>
</div>
</div>
</section>
<section id="more-resources">
<h2>More Resources<a class="headerlink" href="#more-resources" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=7jiPeIFXb6U">I don’t like notebooks</a></p></li>
<li><p><a class="reference external" href="https://blog.jupyter.org/announcing-the-new-jupyter-book-cbf7aa8bc72e">JupyterBook</a></p></li>
<li><p>The <a class="reference external" href="https://documentation.divio.com">Grand Unified Theory of Documentation</a>:</p>
<ul>
<li><p>Tutorials</p></li>
<li><p>How-To Guides</p></li>
<li><p>Explanation</p></li>
<li><p>Reference</p></li>
</ul>
</li>
<li><p><a class="reference external" href="http://witheve.com">Eve: Programming for Humans</a></p></li>
<li><p><a class="reference external" href="https://nbdev.fast.ai">nbdev: Create Python Projects with Jupyter Notebooks</a></p></li>
</ul>
<p>Influences:</p>
<ul class="simple">
<li><p>\TeX: The Program by Donald J. Knuth</p></li>
<li><p>Operating Systems: Design and Implementation by Andrew Tanenbaum</p></li>
</ul>
<p>Our goal: Have a <em>single document</em> that encompasses</p>
<ul class="simple">
<li><p>Code</p></li>
<li><p>Tests</p></li>
<li><p>Tutorial</p></li>
<li><p>How-To-Guides</p></li>
<li><p>Explanations</p></li>
<li><p>Reference</p></li>
</ul>
<p>in an <em>executable</em> and <em>self-updating</em> way.</p>
</section>
<section id="what-illustrate-stands-for">
<h2>What “Illustrate” stands for<a class="headerlink" href="#what-illustrate-stands-for" title="Link to this heading">#</a></h2>
<section id="i-is-for-illustrate">
<h3><code class="docutils literal notranslate"><span class="pre">I</span></code> is for <code class="docutils literal notranslate"><span class="pre">I</span></code>llustrate<a class="headerlink" href="#i-is-for-illustrate" title="Link to this heading">#</a></h3>
<p>Every piece of code should come with an <em>example</em> that <em>illustrates</em> is usage.</p>
</section>
<section id="l-is-for-lavish">
<h3><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>avish<a class="headerlink" href="#l-is-for-lavish" title="Link to this heading">#</a></h3>
<p>Go beyond typewriter text. Make use of all media modern tools have to offer – diagrams! charts! videos! Tie these to your code and examples, such that they stay in sync.</p>
</section>
<section id="l-is-for-log">
<h3><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>og<a class="headerlink" href="#l-is-for-log" title="Link to this heading">#</a></h3>
<p>Do not just describe the final version. Discuss alternatives you have tried (and revoked, and why). This will be helpful for understanding later.</p>
<p>Note down your ideas and plans during development + testing</p>
<p>Also log during debugging. Keep track of your experiments and their results. Turn these into test cases later.</p>
</section>
<section id="u-is-for-update">
<h3><code class="docutils literal notranslate"><span class="pre">U</span></code> is for <code class="docutils literal notranslate"><span class="pre">U</span></code>pdate<a class="headerlink" href="#u-is-for-update" title="Link to this heading">#</a></h3>
<p>Make your document the single place to be updated.</p>
</section>
<section id="s-is-for-spiralize">
<h3><code class="docutils literal notranslate"><span class="pre">S</span></code> is for <code class="docutils literal notranslate"><span class="pre">S</span></code>piralize<a class="headerlink" href="#s-is-for-spiralize" title="Link to this heading">#</a></h3>
<p>Focus on the essentials first, and add details later. Give the reader moments where they can stay and recapitulate what they learned. Make these abstraction layers in your code, such that readers can choose what to use (and what to read, too!) Proceed step by step, illustrating one piece at a time.</p>
</section>
<section id="t-is-for-tutorial">
<h3><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>utorial<a class="headerlink" href="#t-is-for-tutorial" title="Link to this heading">#</a></h3>
<p>Allow your readers to learn what your code is about – from a usage perspective, but also from an implementation perspective. Use quizzes, tests, exercises.</p>
</section>
<section id="r-is-for-reference">
<h3><code class="docutils literal notranslate"><span class="pre">R</span></code> is for <code class="docutils literal notranslate"><span class="pre">R</span></code>eference<a class="headerlink" href="#r-is-for-reference" title="Link to this heading">#</a></h3>
<p>Allow your readers to extract and study those parts they need – interfaces, specs. And, of course, allow them to <em>use</em> your code.</p>
</section>
<section id="a-is-for-assist">
<h3><code class="docutils literal notranslate"><span class="pre">A</span></code> is for <code class="docutils literal notranslate"><span class="pre">A</span></code>ssist<a class="headerlink" href="#a-is-for-assist" title="Link to this heading">#</a></h3>
<p>Have others contribute to your tutorial – e.g. by providing recipes for specific how-to questions
Think of StackOverflow, but constantly tested and updated</p>
<p>StackOverflow is filled with how-to questions. Yet, many of these are outdated over time. Allow for your readers to ask questions (with code that will be executed and tested as part of your work). Make your work a community effort!</p>
</section>
<section id="t-is-for-test">
<h3><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>est<a class="headerlink" href="#t-is-for-test" title="Link to this heading">#</a></h3>
<p>Having detailed examples should automatically lead to full coverage of your code. Have assertions on top – to explain what is going on, but also to ensure consistency between code and text.</p>
<p>Save previous outputs of your examples; get notified when things change. Great way to do regression testing!</p>
</section>
<section id="e-is-for-ease">
<h3><code class="docutils literal notranslate"><span class="pre">E</span></code> is for <code class="docutils literal notranslate"><span class="pre">E</span></code>ase<a class="headerlink" href="#e-is-for-ease" title="Link to this heading">#</a></h3>
<p>Your job is coding, teaching, and testing – all in one place</p>
<p>Ease the life of future readers (which may include you)</p>
<p>Ease the life of people who want to use your code</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Illustrated Code</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-software-in-a-literate-way">Building Software in a Literate Way</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#talk-abstract">Talk Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#some-support-code">Some Support Code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sequence-diagrams-with-mermaid">Sequence Diagrams with Mermaid</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#class-diagrams-with-mermaid">Class Diagrams with Mermaid</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#illustrated-code-building-software-in-a-literate-way">Illustrated Code: Building Software in a Literate Way</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jupyter-demo-factorials">Jupyter Demo: Factorials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#can-programming-be-liberated-from-the-typewriter-style">Can Programming be Liberated from the Typewriter Style?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interface">Interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specification">Specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implementation">Implementation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rationale">Rationale</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tests">Tests</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-tests">Regular Tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#check-against-spec">Check against Spec</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#symbolic-verification">Symbolic Verification</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial">Tutorial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#q-a">Q&amp;A</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#whats-wrong-with-middle">What’s wrong with <code class="docutils literal notranslate"><span class="pre">middle()</span></code>?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-get-a-syntax-error">I get a syntax error</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-we-have-a-largest-and-smallest-function-too">Can we have a <code class="docutils literal notranslate"><span class="pre">largest()</span></code> and <code class="docutils literal notranslate"><span class="pre">smallest()</span></code> function too?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-drawing-uml">More Drawing UML</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#more-resources">More Resources</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-illustrate-stands-for">What “Illustrate” stands for</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-is-for-illustrate"><code class="docutils literal notranslate"><span class="pre">I</span></code> is for <code class="docutils literal notranslate"><span class="pre">I</span></code>llustrate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#l-is-for-lavish"><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>avish</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#l-is-for-log"><code class="docutils literal notranslate"><span class="pre">L</span></code> is for <code class="docutils literal notranslate"><span class="pre">L</span></code>og</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#u-is-for-update"><code class="docutils literal notranslate"><span class="pre">U</span></code> is for <code class="docutils literal notranslate"><span class="pre">U</span></code>pdate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#s-is-for-spiralize"><code class="docutils literal notranslate"><span class="pre">S</span></code> is for <code class="docutils literal notranslate"><span class="pre">S</span></code>piralize</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t-is-for-tutorial"><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>utorial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r-is-for-reference"><code class="docutils literal notranslate"><span class="pre">R</span></code> is for <code class="docutils literal notranslate"><span class="pre">R</span></code>eference</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-is-for-assist"><code class="docutils literal notranslate"><span class="pre">A</span></code> is for <code class="docutils literal notranslate"><span class="pre">A</span></code>ssist</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t-is-for-test"><code class="docutils literal notranslate"><span class="pre">T</span></code> is for <code class="docutils literal notranslate"><span class="pre">T</span></code>est</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#e-is-for-ease"><code class="docutils literal notranslate"><span class="pre">E</span></code> is for <code class="docutils literal notranslate"><span class="pre">E</span></code>ase</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Andreas Zeller
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>
  Copyright &copy; 2021–2025 <a href="https://www.cispa.de/">CISPA Helmholtz Center for Information Security</a>.
  The <strong>content</strong> of this project is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
  The <strong>source code</strong> that is part of the content, as well as the source code used to format and display that content is licensed under the <a href="https://github.com/uds-se/debuggingbook/blob/master/LICENSE.md#mit-license">MIT License</a>.
  <br>
  <a href="https://cispa.de/en/impressum">Imprint</a> &middot; <a href="/html/index.html#how-do-i-cite-your-work">Cite</a>
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>